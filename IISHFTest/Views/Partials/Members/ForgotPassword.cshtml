@inherits UmbracoViewPage<IISHFTest.Core.Models.ForgotPasswordResetRequestModel>
@using IISHFTest.Core.Controllers.SurfaceControllers
@model IISHFTest.Core.Models.ForgotPasswordResetRequestModel

@{
    var modelContent = Umbraco.ContentAtRoot().ToList();
    var registerContent = modelContent
        .FirstOrDefault(x => x.Name == "Home")!.Children()?
        .FirstOrDefault(x => x.Name == "Forgotten Password");


    var heroImageObj = registerContent.Value<IPublishedContent>("heroImage");
    var heroImage = heroImageObj != null ? heroImageObj.Url() : "";
}

<div class="jumbotron jumbotron-fluid hero hero-large" style="background-image: url('@heroImage')">
    <div class="overlay"></div>
    <div class="inner">
        <div class="container custom-container">
            <h1 class="display-4">@registerContent.Value("heroTitle")</h1>
            <p class="lead">@registerContent.Value("heroSubtitle")</p>
        </div>
    </div>
</div>

<div class="container mt-5">
    <div class="row">

        @{
            if ((string)TempData["Status"] == "OK")
            {
                <div class="alert alert-warning" role="alert">
                    <h4>A password reset request has been started. If your email address is found within our systems you will receive a password reset request from noreply@iishf.com.</h4>
                    <br/>
                    <br/>
                    <h4>If you do not receive this within the next 10 minutes please check your spam \ junk folder.</h4>
                </div>
            }
            else
            {
                <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                    @Html.ValidationSummary()
                    @using (Html.BeginUmbracoForm<UserController>("HandlePasswordResetRequest"))
                    {

                        <div class="form-group mb-2 col-12 col-sm-12 col-md-4 col-lg-4">
                            @Html.TextBoxFor(m => m.EmailAddress, new { @class = "form-control ", placeholder = "Email Address", type = "email" })
                            @Html.ValidationMessageFor(m => m.EmailAddress, null, new { @class = "text-danger" })
                        </div>

                        <input type="submit" value="Begin Password Reset" />
                    }
                </div>                
            }
        }

    </div>
</div>